---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "azidentity Provider"
description: |-
  Provider used for authenticating with resources supporting EntraID authentication.
  Main usage is generating a token using Azure Pipelines Workload Federation Identity in IaC pipelines and falling back to azure_cli for local testing, but supports more credential types.
  Most credentials have options like selecting client_id and tenant_id, except for environment and azure_cli credentials which take all the options from external sources.
---

# azidentity Provider

Provider used for authenticating with resources supporting EntraID authentication.

Main usage is generating a token using Azure Pipelines Workload Federation Identity in IaC pipelines and falling back to azure_cli for local testing, but supports more credential types.

Most credentials have options like selecting client_id and tenant_id, except for *environment* and *azure_cli* credentials which take all the options from external sources.

## Example Usage

```terraform
# Copyright (c) HashiCorp, Inc.

provider "azidentity" {
  # Simple pipeline identity with cli fallback for local
  credentials = ["azure_pipelines_credential", "azure_cli_credential"]
}

provider "azidentity" {
  alias       = "client2"
  credentials = ["azure_pipelines_credential", "workload_identity_credential"]
  # If running in pipeline agent, but use different service connection as azurerm
  azure_pipelines_credential = {
    service_connection_id = "6174d1c2-f44f-410c-93f1-82a19d400eb8"
    client_id             = "db64e57b-7500-4ece-b682-e8fa8c20d9d5"
    tenant_id             = "6aafbe4c-9457-415e-b57d-834fe4d09c7d"
  }
  # Same identity, if running in AKS cluster
  workload_identity_credential = {
    client_id = "db64e57b-7500-4ece-b682-e8fa8c20d9d5"
    tenant_id = "6aafbe4c-9457-415e-b57d-834fe4d09c7d"
  }
}

variable "client_id" {
  type = string
}

variable "tenant_id" {
  type = string
}

variable "client_secret" {
  type      = string
  sensitive = true
}

provider "azidentity" {
  alias       = "identity3"
  credentials = ["client_secret_credential"]
  client_secret_credential = {
    client_id     = var.client_id
    client_secret = var.client_secret
    tenant_id     = var.tenant_id
  }
}

provider "azidentity" {
  alias       = "identity4"
  credentials = ["client_certificate_credential"]
  client_certificate_credential = {
    client_id        = var.client_id
    tenant_id        = var.tenant_id
    certificate_path = "./privkey_name.pem"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `credentials` (List of String) List of credentials to try. They will be tried in the specified order. 
	
	Supported types are (enabled by default in this order are in bold, similar to defaultAzureCredential): 
	- **environment_credential**
	- **azure_pipelines_credential** 
	- **workload_identity_credential**
	- **managed_identity_credential**
	- **azure_cli_credential**
	- client_secret_credential
	- client_certificate_credential
- `cloud` (String) Cloud environment to target. Possible values are: ***AzurePublic*** (default), *AzureGovernment*, *AzureChina*
- `azure_pipelines_credential` (Attributes) Configuration block for Azure Pipelines Credential. If using TerraformTask@5, no configuration needed unless you want to use different service connection than used for terraform. If using AzureCLI@2 or AzurePowershell@5, you need to also set SYSTEM_ACCESSTOKEN env variable, or provide access token as terraform variable. (see [below for nested schema](#nestedatt--azure_pipelines_credential))
- `client_certificate_credential` (Attributes) Configuration for a client certificate credential. All properties are required, as there's already environment_credential that provides same functionality with env variables. (see [below for nested schema](#nestedatt--client_certificate_credential))
- `client_secret_credential` (Attributes) Configuration for a client secret credential. All properties are required, as there's already environment_credential that provides same functionality with env variables. (see [below for nested schema](#nestedatt--client_secret_credential))
- `managed_identity_credential` (Attributes) Configuration for Managed Identity credential (optional `client_id` for user-assigned identity). (see [below for nested schema](#nestedatt--managed_identity_credential))
- `workload_identity_credential` (Attributes) Configuration for workload identity credential. You can provide custom client_id and tenant_id if using multiple workload identities on single pod. (see [below for nested schema](#nestedatt--workload_identity_credential))

<a id="nestedatt--azure_pipelines_credential"></a>
### Nested Schema for `azure_pipelines_credential`

Optional:

- `client_id` (String) Optional client_id if it's different from used service connection (*ARM_CLIENT_ID* or *AZURE_CLIENT_ID*)
- `service_connection_id` (String) Optional Azure DevOps Service Connection ID, if it's different from used service connection (*ARM_OIDC_AZURE_SERVICE_CONNECTION_ID* or *AZURESUBSCRIPTION_SERVICE_CONNECTION_ID*)
- `system_access_token` (String, Sensitive) Optional OIDC request token, if not using Terraform@5 task, or not setting *SYSTEM_ACCESSTOKEN* env variable
- `tenant_id` (String) Optional tenant_id if it's different from used service connection (*ARM_TENANT_ID* or *AZURE_TENANT_ID*)


<a id="nestedatt--client_certificate_credential"></a>
### Nested Schema for `client_certificate_credential`

Required:

- `certificate_path` (String)
- `client_id` (String)
- `tenant_id` (String)

Optional:

- `certificate_password` (String, Sensitive)


<a id="nestedatt--client_secret_credential"></a>
### Nested Schema for `client_secret_credential`

Required:

- `client_id` (String)
- `client_secret` (String, Sensitive)
- `tenant_id` (String)


<a id="nestedatt--managed_identity_credential"></a>
### Nested Schema for `managed_identity_credential`

Optional:

- `client_id` (String)


<a id="nestedatt--workload_identity_credential"></a>
### Nested Schema for `workload_identity_credential`

Optional:

- `client_id` (String)
- `tenant_id` (String)
